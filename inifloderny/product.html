<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Product Page
  </title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="product.css" rel="stylesheet"/>
 </head>
 <body>
  <?php include 'auth_check.php'; ?>
  <header>
     <nav class="navbar">
      <div class="logo">MedCatalog</div>
      <ul class="nav-links">
        <li><a href="home.html">Home</a></li>
        <li><a href="allcategory.html">Products</a></li>
        <li><a href="index.html">Contact</a></li>
      </ul>
    </nav>

  </header>
  <main>
   <section aria-label="Main product details" class="product-top">
    <div class="product-image">
     <img alt="Shiitake mushrooms on bark with green vine on light gray background" height="320" src="https://storage.googleapis.com/a1aa/image/50adf38e-6f5b-401c-7020-4de65f74b120.jpg" width="320"/>
    </div>
    <div class="product-info">
     <h1>
      Product name
     </h1>
     <div class="subheading">
      Subheading
     </div>
     <div class="price">
      $10.99
     </div>
     <div class="description">
      Body text for describing what this product is and why this product is simply a must-buy.
     </div>
     <div class="fine-print">
      Text box for additional details or fine print
     </div>
    </div>
   </section>
   <section aria-label="Related products" class="related-products-section">
    <h2>
     Related products
    </h2>
    <div class="related-products-grid">
     <article class="related-product">
      <img alt="Two pears on light gray background" height="90" src="https://storage.googleapis.com/a1aa/image/761f1524-0d80-4b2a-cc0a-0b8b4512d852.jpg" width="160"/>
      <div class="title">
       Product
      </div>
      <div class="desc">
       Description of first product
      </div>
      <div class="price">
       $10.99
      </div>
     </article>
     <article class="related-product">
      <img alt="Radishes and greens on white background" height="90" src="https://storage.googleapis.com/a1aa/image/43bb7248-0c31-42c1-47a5-a4174d0459db.jpg" width="160"/>
      <div class="title">
       Product
      </div>
      <div class="desc">
       Description of second product
      </div>
      <div class="price">
       $10.99
      </div>
     </article>
     <article class="related-product">
      <img alt="Watermelon slices on light gray background" height="90" src="https://storage.googleapis.com/a1aa/image/1d66568d-c74c-4e1d-2aa2-20e6bf6a2482.jpg" width="160"/>
      <div class="title">
       Product
      </div>
      <div class="desc">
       Description of third product
      </div>
      <div class="price">
       $10.99
      </div>
     </article>
     <article class="related-product">
      <img alt="Shiitake mushrooms on white background" height="90" src="https://storage.googleapis.com/a1aa/image/240924a9-d926-4c29-8432-2cc47469115c.jpg" width="160"/>
      <div class="title">
       Product
      </div>
      <div class="desc">
       Description of fourth product
      </div>
      <div class="price">
       $10.99
      </div>
     </article>
     <article class="related-product">
      <img alt="Stacked vegetables on white background" height="90" src="https://storage.googleapis.com/a1aa/image/05acaaf6-d2e0-4aa4-319c-629a19632690.jpg" width="160"/>
      <div class="title">
       <strong>
        Product
       </strong>
      </div>
      <div class="desc">
       Description of fifth product
      </div>
      <div class="price">
       $10.99
      </div>
     </article>
     <article class="related-product">
      <img alt="Cherries on white background" height="90" src="https://storage.googleapis.com/a1aa/image/b10f15b2-d942-4ec5-d7b0-dd150ca88ecb.jpg" width="160"/>
      <div class="title">
       <strong>
        Product
       </strong>
      </div>
      <div class="desc">
       Description of sixth product
      </div>
      <div class="price">
       $10.99
      </div>
     </article>
    </div>
   </section>
  </main>
  <footer>
   <div class="footer-top">
    <div class="footer-site-name">MedCatalog</div>
    <div class="footer-links">
      <div class="footer-topic">
        <strong>Produk</strong>
        <a href="home.html">Katalog</a>
        <a href="allcategory.html">Kategori</a>
        <a href="index.html">Tentang</a>
      </div>
      <div class="footer-topic">
        <strong>Bantuan</strong>
        <a href="#">FAQ</a>
        <a href="#">Kontak</a>
        <a href="#">Dukungan</a>
      </div>
      <div class="footer-topic">
        <strong>Ikuti Kami</strong>
        <a href="#">Facebook</a>
        <a href="#">Twitter</a>
        <a href="#">Instagram</a>
      </div>
    </div>
   </div>
   <div class="footer-social">
    <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
    <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
    <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
   </div>
   <p>© 2025 MedCatalog. Semua hak dilindungi. Konsultasikan dengan dokter sebelum menggunakan obat.</p>
     <i class="fab fa-linkedin-in">
     </i>
    </a>
    <a aria-label="YouTube" href="#">
     <i class="fab fa-youtube">
     </i>
    </a>
    <a aria-label="Instagram" href="#">
     <i class="fab fa-instagram">
     </i>
    </a>
   </div>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Ambil ID produk dari URL parameter
      const urlParams = new URLSearchParams(window.location.search);
      const productId = urlParams.get('id');

      if (!productId) {
        document.querySelector('.product-info h1').textContent = 'Produk tidak ditemukan';
        return;
      }

      // Fetch semua produk dan cari yang sesuai ID
      fetch('get_products.php')
        .then(response => response.json())
        .then(data => {
          if (data.error) {
            throw new Error(data.error);
          }

          const product = data.products.find(p => p.id == productId);

          if (!product) {
            document.querySelector('.product-info h1').textContent = 'Produk tidak ditemukan';
            return;
          }

          // Update informasi produk
          document.querySelector('.product-image img').src = product.image_url;
          document.querySelector('.product-image img').alt = product.name;
          document.querySelector('.product-info h1').textContent = product.name;
          document.querySelector('.product-info .description').textContent = product.description;
          document.querySelector('.product-info .price').textContent = 'Rp ' + product.price;

          // Populate related products
          const relatedProducts = data.products.filter(p => p.id != productId).slice(0, 6); // Take up to 6 related
          const relatedGrid = document.querySelector('.related-products-grid');
          relatedGrid.innerHTML = ''; // Clear existing

          relatedProducts.forEach(relProduct => {
            const article = document.createElement('article');
            article.className = 'related-product';
            article.innerHTML = `
              <a href="product.html?id=${relProduct.id}">
                <img alt="${relProduct.name}" height="90" src="${relProduct.image_url}" width="160"/>
                <div class="title">${relProduct.name}</div>
                <div class="desc">${relProduct.description.substring(0, 50)}...</div>
                <div class="price">Rp ${relProduct.price}</div>
              </a>
            `;
            relatedGrid.appendChild(article);
          });
        })
        .catch(error => {
          console.error('Error loading product:', error);
          document.querySelector('.product-info h1').textContent = 'Error memuat produk';
        });
    });
  </script>

  <footer>
    <div class="footer-top">
      <div class="footer-site-name">MedCatalog</div>
      <div class="footer-links">
        <div class="footer-topic">
          <strong>Produk</strong>
          <a href="home.html">Katalog</a>
          <a href="allcategory.html">Kategori</a>
          <a href="index.html">Tentang</a>
        </div>
        <div class="footer-topic">
          <strong>Bantuan</strong>
          <a href="#">FAQ</a>
          <a href="#">Kontak</a>
          <a href="#">Dukungan</a>
        </div>
        <div class="footer-topic">
          <strong>Ikuti Kami</strong>
          <a href="#">Facebook</a>
          <a href="#">Twitter</a>
          <a href="#">Instagram</a>
        </div>
      </div>
    </div>
    <div class="footer-social">
      <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
      <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
      <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
      <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
      <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
    </div>
    <p>© 2025 MedCatalog. Semua hak dilindungi. Konsultasikan dengan dokter sebelum menggunakan obat.</p>
  </footer>

 </body>
</html>